<!DOCTYPE html>
<html>
<head>
  <title>Space Bounce</title>
  <script type="text/javascript" src="js/lib/jquery-1.11.0.min.js"></script>
  <script type="text/javascript" src="js/lib/easeljs-0.7.1.min.js"></script>
  <script type="text/javascript" src="js/lib/soundjs-0.5.2.min.js"></script>
  <script type="text/javascript" src="js/lib/tweenjs.min.js"></script>
  <script type="text/javascript" src="js/lib/preloadjs.min.js"></script>
  <script type="text/javascript" src="js/lib/Box2dWeb.min.js"></script>
  <script type="text/javascript" src="js/lib/amplify.min.js"></script>

  <script type="text/javascript" src="js/config.js"></script>
  <link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<body>
  <div id="root-container">
  	<br>
  	<header>
  		<h1><a href="#game">SPACE BOUNCE</a></h1>
  		<nav>
        <ul>
          <li><a href="#createjs_demo">CreateJS</a></li>
          <li><a href="#box2d_demo">Box2D</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#references">References</a></li>
        </ul>
  		</nav>
  	</header>

    <div id="page-content">
      Partial content goes here.
    </div>
  </div>
</body>

<script>
  // TODO: rack server should be updated to support better routing
  var loadPageFromUrl = function(url) {
    $('#page-content').load(url.replace('#','pages/') + '.html');
  };

  var url = window.location.hash;
  if (url === '') url = '#game';
  loadPageFromUrl(url);

  $('h1 a, nav ul li a').click(function() {
    resetExecutionEnvironment();
    var url = $(this).attr('href');
    loadPageFromUrl(url);
  });

  /*
   Since there are a lot of asynchronous processes continuously executing, we
   need to kill them when the user leaves the current view. Since this is
   designed as a single page app, there are no actual page refreshes when
   user navigates to other views, and the processes will continue to run.
   Most things created like namespace variables are reset
   if user navigates back to the main game (preventing memory leaks), but things
   like event listeners may respawn unless they are removed before navigating
   to other views.
  */
  function resetExecutionEnvironment() {
    createjs.Ticker.removeAllEventListeners();
  }
</script>
</html>
